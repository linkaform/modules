# -*- coding: utf-8 -*-
import sys, simplejson, copy

from stock_utils import Stock

from account_settings import *

"""
python actualiza_registros_stock.py '{}' '{"jwt": "jwt eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InNpZ2FfbWF0ZXJpYWxlcyIsInVzZXJfaWQiOjE3ODYwLCJwYXJlbnRfaWQiOjE3ODYwLCJpc19tb2JpbGUiOmZhbHNlLCJleHAiOjE3NTc2OTQ1NTMsImRldmljZV9vcyI6IndlYiIsImVtYWlsIjoiYWRtaW5wY2xpbmtAb3BlcmFjaW9ucGNpLmNvbS5teCJ9.sLao7q_-n5d8cGeI6HHZXd77EaN6JPXzKoMA1avkTiIZt2r3MHt_BQ85hcWrnecYUh6-bKyHdwBcZ12RuE_43j76ORuVf_D3ts2_HURTYsqP0bCvdoJMO7TMlA2gVdQrH5-rZ0vHy-wn7Bnwkyck08RswB9PeFocN5IwNuRCgnSN8i2m37ANOSlXIjGz3h7dEeo1cFtlbYeBMmKVCALk_c8x9zeh1KIIGy-A4MjVPwieBwh0asjlOPkaOJH3EDpvcz-VkakCsm2R9rHD9Wf-t0Nj1UoqwSuWiAaefmhHEKg4dnjdJgnAXczi9yQ40Mga0DxIPTVTCso6YwMkKy-DBvbswgecWlS4Z_KJXhipDJZDNwv0sxSZWQbzwF1cwHARdRv-Vu3tGdXQEiM9W-K6IJqsA9pIYz_ImtGRrcYDlx5_Cwh4dmtQeZMXk5-kUA9jDPXPGKWYysp5djn9Pv2GGFwdS48FZYkAaLjZfbTbLDNHdWt59ZWgfB7Kw_sgZJbm_FkIqN0clvEuGtdPMQMtsphUaqKoaJbIoF0Oq7ArNErtN45iTZMlN0YXLlloKlFwZ7ZapuRSU-aio4oNDF1wN6CWdOFoYizS_ZZSD4_UWSMJBDYpJEsL7yFdLT8Yeq_TIPBIpUkVOIbvzOxcsyYLpfBGe6wFsw1LcO_K5ADzIbc", "account_id": 17860, "docker_image": "linkaform/python3_lkf:develop", "name": "actualiza_registros_stock.py"}'
"""


class Stock(Stock):


    def update_stock_record(self):
        """
        Se busca en la collecion de Stock el cache para hacer update
        """
        list_lotes = [
            "HWTC5F3864B2", "HWTC5F2B5FB2", "HWTC5F34A3B2", "HWTC5F27C2B2", "HWTC5F302CB2", "HWTC5F3E83B2", "HWTC5F3C86B2", "HWTC5F42DAB2", "HWTC5F283EB2", "HWTC5F2C3BB2", 
"HWTC5F35DCB2", "HWTC5F2706B2", "HWTC5F4390B2", "HWTC5F3280B2", "HWTC5F42C5B2", "HWTC5F3C7AB2", "HWTC5F3D80B2", "HWTC5F3BACB2", "HWTC5F31A5B2", "HWTC5F3CD3B2", 
"HWTC5F420BB2", "HWTC5F3DACB2", "HWTC5F3E59B2", "HWTC5F3FBBB2", "HWTC5F3D41B2", "HWTC5F3898B2", "HWTC5F4540B2", "HWTC5F39DEB2", "HWTC5F3622B2", "HWTC5F3059B2", 
"HWTC5F4264B2", "HWTC5F3895B2", "HWTC5F2FB7B2", "HWTC5F4117B2", "HWTC5F3D56B2", "HWTC5F34E7B2", "HWTC5F433BB2", "HWTC5F2708B2", "HWTC5F2745B2", "HWTC5F2E66B2", 
"HWTC5F2A36B2", "HWTC5F2EB8B2", "HWTC5F4263B2", "HWTC5F2E90B2", "HWTC5F3D2BB2", "HWTC5F35EFB2", "HWTC5F39B1B2", "HWTC5F44D1B2", "HWTC5F2C56B2", "HWTC5F3130B2", 
"HWTC5F296BB2", "HWTC5F2BD1B2", "HWTC5F3D61B2", "HWTC5F2E38B2", "HWTC5F2703B2", "HWTC5F3C62B2", "HWTC5F2B68B2", "HWTC5F4537B2", "HWTC5F3138B2", "HWTC5F2BDCB2", 
"HWTC5F397CB2", "HWTC5F3BF1B2", "HWTC5F4213B2", "HWTC5F2F98B2", "HWTC5F3F19B2", "HWTC5F39F6B2", "HWTC5F3965B2", "HWTC5F3795B2", "HWTC5F4056B2", "HWTC5F37BAB2", 
"HWTC5F34CBB2", "HWTC5F2A84B2", "HWTC5F2725B2", "HWTC5F426DB2", "HWTC5F2739B2", "HWTC5F2E6EB2", "HWTC5F343BB2", "HWTC5F2E99B2", "HWTC5F36AEB2", "HWTC5F37EBB2", 
"HWTC5F3F04B2", "HWTC5F2645B2", "HWTC5F3632B2", "HWTC5F26E8B2", "HWTC5F45B0B2", "HWTC5F33B7B2", "HWTC5F2EF6B2", "HWTC5F3273B2", "HWTC5F4516B2", "HWTC5F3F37B2", 
"HWTC5F43EDB2", "HWTC5F321EB2", "HWTC5F37BFB2", "HWTC5F28FCB2", "HWTC5F354AB2", "HWTC5F3254B2", "HWTC5F273EB2", "HWTC5F369EB2", "HWTC5F32FAB2", "HWTC5F3D1FB2", 
"HWTC5F3680B2", "HWTC5F2B1DB2", "HWTC5F414AB2", "HWTC5F2B2FB2", "HWTC5F2679B2", "HWTC5F2F52B2", "HWTC5F2FE0B2", "HWTC5F3433B2", "HWTC5F3C5CB2", "HWTC5F394EB2", 
"HWTC5F4551B2", "HWTC5F3147B2", "HWTC5F3DCEB2", "HWTC5F39ABB2", "HWTC5F3247B2", "HWTC5F3261B2", "HWTC5F455DB2", "HWTC5F2DD6B2", "HWTC5F379CB2", "HWTC5F34DAB2", 
"HWTC5F31A0B2", "HWTC5F3601B2", "HWTC5F3939B2", "HWTC5F40EBB2", "HWTC5F42FCB2", "HWTC5F4053B2", "HWTC5F2EE3B2", "HWTC5F3E09B2", "HWTC5F2FDAB2", "HWTC5F33E2B2", 
"HWTC5F404EB2", "HWTC5F3710B2", "HWTC5F38A5B2", "HWTC5F4469B2", "HWTC5F3D0CB2", "HWTC5F29A6B2", "HWTC5F3858B2", "HWTC5F2FB9B2", "HWTC5F2A09B2", "HWTC5F2839B2", 
"HWTC5F404AB2", "HWTC5F32B6B2", "HWTC5F2BEDB2", "HWTC5F3810B2", "HWTC5F3F0DB2", "HWTC5F277CB2", "HWTC5F367CB2", "HWTC5F2CADB2", "HWTC5F2AC2B2", "HWTC5F3599B2", 
"HWTC5F281AB2", "HWTC5F2EFFB2", "HWTC5F3642B2", "HWTC5F3EF9B2", "HWTC5F405EB2", "HWTC5F297FB2", "HWTC5F4329B2", "HWTC5F2B5DB2", "HWTC5F3C16B2", "HWTC5F2D4DB2", 
"HWTC5F42F4B2", "HWTC5F417AB2", "HWTC5F2F3CB2", "HWTC5F265EB2", "HWTC5F3457B2", "HWTC5F32C6B2", "HWTC5F3DB3B2", "HWTC5F439BB2", "HWTC5F395CB2", "HWTC5F453AB2", 
"HWTC5F2F5BB2", "HWTC5F2A48B2", "HWTC5F39E3B2", "HWTC5F2AC4B2", "HWTC5F32AEB2", "HWTC5F4055B2", "HWTC5F341FB2", "HWTC5F3C0FB2", "HWTC5F39DBB2", "HWTC5F43F2B2", 
"HWTC5F444EB2", "HWTC5F35BEB2", "HWTC5F3ACFB2", "HWTC5F40BAB2", "HWTC5F437DB2", "HWTC5F3CA8B2", "HWTC5F30E6B2", "HWTC5F4515B2", "HWTC5F32E4B2", "HWTC5F444BB2", 
"HWTC5F30ACB2", "HWTC5F335CB2", "HWTC5F2FD7B2", "HWTC5F32EBB2", "HWTC5F3FAFB2", "HWTC5F2ED4B2", "HWTC5F3A77B2", "HWTC5F27B8B2", "HWTC5F358FB2", "HWTC5F315EB2", 
"HWTC5F340AB2", "HWTC5F379DB2", "HWTC5F3FB1B2", "HWTC5F2F1EB2", "HWTC5F452BB2", "HWTC5F3916B2", "HWTC5F4491B2", "HWTC5F2B6DB2", "HWTC5F2C10B2", "HWTC5F38E6B2", 
"HWTC5F2E00B2", "HWTC5F2DA6B2", "HWTC5F2F19B2", "HWTC5F2743B2", "HWTC5F419BB2", "HWTC5F44AFB2", "HWTC5F3B7BB2", "HWTC5F29CEB2", "HWTC5F2A6AB2", "HWTC5F2D7FB2", 
"HWTC5F3FC8B2", "HWTC5F39C8B2", "HWTC5F3889B2", "HWTC5F39B5B2", "HWTC5F35F3B2", "HWTC5F421BB2", "HWTC5F3B71B2", "HWTC5F2E1AB2", "HWTC5F2749B2", "HWTC5F45B9B2", 
"HWTC5F4172B2", "HWTC5F3748B2", "HWTC5F4558B2", "HWTC5F3FE3B2", "HWTC5F2C40B2", "HWTC5F2BA1B2", "HWTC5F3E95B2", "HWTC5F2B6CB2", "HWTC5F2F17B2", "HWTC5F3950B2", 
"HWTC5F2C68B2", "HWTC5F2AB4B2", "HWTC5F3734B2", "HWTC5F3E51B2", "HWTC5F312FB2", "HWTC5F4554B2", "HWTC5F264BB2", "HWTC5F3C18B2", "HWTC5F29ECB2", "HWTC5F3297B2", 
"HWTC5F37AFB2", "HWTC5F3FF1B2", "HWTC5F358AB2", "HWTC5F3BC6B2", "HWTC5F3AE3B2", "HWTC5F3EE4B2", "HWTC5F2BFAB2", "HWTC5F3DAFB2", "HWTC5F38CAB2", "HWTC5F3991B2", 
"HWTC5F42F3B2", "HWTC5F4382B2", "HWTC5F4502B2", "HWTC5F2B60B2", "HWTC5F2ED8B2", "HWTC5F32C3B2", "HWTC5F2AB6B2", "HWTC5F3E60B2", "HWTC5F32EDB2", "HWTC5F3172B2", 
"HWTC5F3E4CB2", "HWTC5F3CF1B2", "HWTC5F450FB2", "HWTC5F3305B2", "HWTC5F44E1B2", "HWTC5F3A50B2", "HWTC5F358CB2", "HWTC5F2BA7B2", "HWTC5F40E7B2", "HWTC5F34A7B2", 
"HWTC5F29EFB2", "HWTC5F3473B2", "HWTC5F4013B2", "HWTC5F3D3FB2", "HWTC5F36FCB2", "HWTC5F3841B2", "HWTC5F3830B2", "HWTC5F3F66B2", "HWTC5F3AB8B2", "HWTC5F397EB2", 
"HWTC5F3AF6B2", "HWTC5F2ECAB2", "HWTC5F266EB2", "HWTC5F2FAAB2", "HWTC5F3207B2", "HWTC5F38C5B2", "HWTC5F3FBCB2", "HWTC5F3AA7B2", "HWTC5F31C4B2", "HWTC5F405DB2", 
"HWTC5F268BB2", "HWTC5F4312B2", "HWTC5F3E37B2", "HWTC5F3D1BB2", "HWTC5F3E07B2", "HWTC5F2EA9B2", "HWTC5F417CB2", "HWTC5F352AB2", "HWTC5F37ADB2", "HWTC5F38B6B2", 
"HWTC5F34A2B2", "HWTC5F3534B2", "HWTC5F2673B2", "HWTC5F2DD1B2", "HWTC5F35C8B2", "HWTC5F38D3B2", "HWTC5F3663B2", "HWTC5F2BA2B2", "HWTC5F35A9B2", "HWTC5F2ABEB2", 
"HWTC5F3F2BB2", "HWTC5F41AFB2", "HWTC5F287BB2", "HWTC5F3E86B2", "HWTC5F3E4BB2", "HWTC5F3C33B2", "HWTC5F3A9DB2", "HWTC5F3DD3B2", "HWTC5F39EBB2", "HWTC5F4393B2", 
"HWTC5F2B76B2", "HWTC5F39D6B2", "HWTC5F32D3B2", "HWTC5F31D8B2", "HWTC5F390FB2", "HWTC5F3A84B2", "HWTC5F3344B2", "HWTC5F2C8FB2", "HWTC5F2EF7B2", "HWTC5F3191B2", 
"HWTC5F3706B2", "HWTC5F34A1B2", "HWTC5F38E7B2", "HWTC5F3AF0B2", "HWTC5F3607B2", "HWTC5F44D8B2", "HWTC5F4298B2", "HWTC5F3DE7B2", "HWTC5F3A65B2", "HWTC5F3548B2", 
"HWTC5F3F2AB2", "HWTC5F28E1B2", "HWTC5F4462B2", "HWTC5F285AB2", "HWTC5F33C6B2", "HWTC5F2BEBB2", "HWTC5F2EB4B2", "HWTC5F2FE1B2", "HWTC5F3102B2", "HWTC5F3383B2", 
"HWTC5F3506B2", "HWTC5F2F2CB2", "HWTC5F38B1B2", "HWTC5F34D7B2", "HWTC5F27E3B2", "HWTC5F3B25B2", "HWTC5F3AD8B2", "HWTC5F3EEDB2", "HWTC5F4547B2", "HWTC5F27B5B2", 
"HWTC5F443AB2", "HWTC5F2BEFB2", "HWTC5F2818B2", "HWTC5F3093B2", "HWTC5F30B0B2", "HWTC5F2864B2", "HWTC5F2646B2", "HWTC5F27CAB2", "HWTC5F2D27B2", "HWTC5F4303B2", 
"HWTC5F4214B2", "HWTC5F2ED0B2", "HWTC5F3888B2", "HWTC5F2BDDB2", "HWTC5F3A6EB2", "HWTC5F412FB2", "HWTC5F3E3CB2", "HWTC5F376FB2", "HWTC5F39BCB2", "HWTC5F3275B2", 
"HWTC5F30E7B2", "HWTC5F3C6FB2", "HWTC5F2704B2", "HWTC5F3BEDB2", "HWTC5F37C6B2", "HWTC5F2657B2", "HWTC5F33D6B2", "HWTC5F2855B2", "HWTC5F2CE4B2", "HWTC5F3D1EB2", 
"HWTC5F454FB2", "HWTC5F2ADDB2", "HWTC5F4019B2", "HWTC5F422EB2", "HWTC5F3122B2", "HWTC5F4461B2", "HWTC5F44F4B2", "HWTC5F3AB0B2", "HWTC5F4183B2", "HWTC5F295CB2", 
"HWTC5F2DFDB2", "HWTC5F38D0B2", "HWTC5F378AB2", "HWTC5F3DADB2", "HWTC5F416EB2", "HWTC5F413EB2", "HWTC5F2BB3B2", "HWTC5CD3F9B2", "HWTC5CE7F2B2", "HWTC5CD934B2", 
"HWTC5CD502B2", "HWTC5CE1CBB2", "HWTC5CE8C5B2", "HWTC5CE8E6B2", "HWTC5CDACBB2", "HWTC5CE34FB2", "HWTC5CE008B2", "HWTC5CD217B2", "HWTC5CD257B2", "HWTC5CDF76B2", 
"HWTC5CD5C1B2", "HWTC5CD2D0B2", "HWTC5CE1F8B2", "HWTC5CE228B2", "HWTC5CD1C4B2", "HWTC5CD320B2", "HWTC5CE9BAB2", "HWTC5CE6A1B2", "HWTC5CD3DDB2", "HWTC5CDBFCB2", 
"HWTC5CE4F1B2", "HWTC5CDF07B2", "HWTC5CE2C7B2", "HWTC5CE664B2", "HWTC5CE486B2", "HWTC5CDADAB2", "HWTC5CE1FAB2", "HWTC5CD5AFB2", "HWTC5CD33AB2", "HWTC5CD780B2", 
"HWTC5CD243B2", "HWTC5CE6A4B2", "HWTC5CDDD4B2", "HWTC5CE1C6B2", "HWTC5CDDB5B2", "HWTC5CD772B2", "HWTC5CDF6DB2", "HWTC5CDE50B2", "HWTC5CD7DEB2", "HWTC5CE6ECB2", 
"HWTC5CD084B2", "HWTC5CDC37B2", "HWTC5CD981B2", "HWTC5CE6EBB2", "HWTC5CDD61B2", "HWTC5CD9FEB2", "HWTC5CE7D4B2", "HWTC5CDFBBB2", "HWTC5CDD13B2", "HWTC5CD979B2", 
"HWTC5CD299B2", "HWTC5CD4C9B2", "HWTC5CD202B2", "HWTC5CE640B2", "HWTC5CE37EB2", "HWTC5CE2C4B2", "HWTC5CE555B2", "HWTC5CD80BB2", "HWTC5CDDF8B2", "HWTC5CE564B2", 
"HWTC5CD778B2", "HWTC5CDE59B2", "HWTC5CD148B2", "HWTC5CDEF1B2", "HWTC5CE296B2", "HWTC5CD74EB2", "HWTC5CDC7FB2", "HWTC5CD3C1B2", "HWTC5CDC4DB2", "HWTC5CDE5BB2", 
"HWTC5CE179B2", "HWTC5CD9DEB2", "HWTC5CD716B2", "HWTC5CE827B2", "HWTC5CE395B2", "HWTC5CDD72B2", "HWTC5CD676B2", "HWTC5CD8D3B2", "HWTC5CD7FAB2", "HWTC5CE0EAB2", 
"HWTC5CD741B2", "HWTC5CE0BAB2", "HWTC5CE87AB2", "HWTC5CDEA4B2", "HWTC5CD8A2B2", "HWTC5CE278B2", "HWTC5CCFC2B2", "HWTC5CD18AB2", "HWTC5CD1A1B2", "HWTC5CE470B2", 
"HWTC5CD43BB2", "HWTC5CE3D3B2", "HWTC5CD5E8B2", "HWTC5CDF37B2", "HWTC5CE41AB2", "HWTC5CDE68B2", "HWTC5CE46BB2", "HWTC5CDA8AB2", "HWTC5CD6EAB2", "HWTC5CD00FB2", 
"HWTC5CD43DB2", "HWTC5CDE78B2", "HWTC5CE2B5B2", "HWTC5CE2A6B2", "HWTC5CD12DB2", "HWTC5CD8F7B2", "HWTC5CD09AB2", "HWTC5CE599B2", "HWTC5CD548B2", "HWTC5CD6DFB2", 
"HWTC5CDDDDB2", "HWTC5CD6FDB2", "HWTC5CDD30B2", "HWTC5CDE85B2", "HWTC5CD79DB2", "HWTC5CDECCB2", "HWTC5CDD0DB2", "HWTC5CE1F6B2", "HWTC5CE09EB2", "HWTC5CDE89B2", 
"HWTC5CD216B2", "HWTC5CE97FB2", "HWTC5CE96FB2", "HWTC5CE60BB2", "HWTC5CD092B2", "HWTC5CDCF4B2", "HWTC5CDBC9B2", "HWTC5CE9F7B2", "HWTC5CD43CB2", "HWTC5CE134B2", 
"HWTC5CDFDAB2", "HWTC5CE31BB2", "HWTC5CDA2CB2", "HWTC5CE232B2", "HWTC5CE5B8B2", "HWTC5CE422B2", "HWTC5CE9B8B2", "HWTC5CE638B2", "HWTC5CE584B2", "HWTC5CD8A3B2", 
"HWTC5CD023B2", "HWTC5CD530B2", "HWTC5CE22AB2", "HWTC5CDC5DB2", "HWTC5CD3A1B2", "HWTC5CD757B2", "HWTC5CE9F8B2", "HWTC5CDBF7B2", "HWTC5CD160B2", "HWTC5CD340B2", 
"HWTC5CDF26B2", "HWTC5CD1D6B2", "HWTC5CD682B2", "HWTC5CE3F9B2", "HWTC5CE959B2", "HWTC5CDE06B2", "HWTC5CDDF0B2", "HWTC5CE05BB2", "HWTC5CD173B2", "HWTC5CD9BBB2", 
"HWTC5CCFA1B2", "HWTC5CD635B2", "HWTC5CD44FB2", "HWTC5CE4DBB2", "HWTC5CD879B2", "HWTC5CD305B2", "HWTC5CE4C3B2", "HWTC5CD2B9B2", "HWTC5CD4C6B2", "HWTC5CE2C6B2", 
"HWTC5CDD97B2", "HWTC5CD1FDB2", "HWTC5CE852B2", "HWTC5CE7CAB2", "HWTC5CD288B2", "HWTC5CE55DB2", "HWTC5CDBCCB2", "HWTC5CDDF1B2", "HWTC5CE7C6B2", "HWTC5CE63DB2", 
"HWTC5CE656B2", "HWTC5CDC55B2", "HWTC5CE0D2B2", "HWTC5CE5D9B2", "HWTC5CD887B2", "HWTC5CE9C6B2", "HWTC5CDB71B2", "HWTC5CD60DB2", "HWTC5CD634B2", "HWTC5CE2F9B2", 
"HWTC5CDB2FB2", "HWTC5CE501B2", "HWTC5CDE4AB2", "HWTC5CDD75B2", "HWTC5CD471B2", "HWTC5CE2CCB2", "HWTC5CE440B2", "HWTC5CD107B2", "HWTC5CD6BDB2", "HWTC5CDCC7B2", 
"HWTC5CDA20B2", "HWTC5CE53DB2", "HWTC5CE082B2", "HWTC5CE6B0B2", "HWTC5CE48EB2", "HWTC5CDFC2B2", "HWTC5CE2BDB2", "HWTC5CE563B2", "HWTC5CE9F3B2", "HWTC5CD54CB2", 
"HWTC5CD03EB2", "HWTC5CDCC6B2", "HWTC5CE73AB2", "HWTC5CE9ABB2", "HWTC5CE520B2", "HWTC5CD385B2", "HWTC5CDEE4B2", "HWTC5CDB99B2", "HWTC5CD750B2", "HWTC5CE834B2", 
        ]
        query = {
            'form_id':self.FORM_INVENTORY_ID, 
            'deleted_at': {'$exists': False},
            # f"answers.{self.Product.SKU_OBJ_ID}.{self.Product.f['product_code']}":'1468270',
            # f"answers.{self.f['folio_recepcion']}":"REC-86",
            # # f"answers.{self.f['actuals']}":{'$exists':False},

            "answers.6824e62e7c8af42c04a73d28.65ac6fbc070b93e656bd7fbe": "PCI Puebla",
            f"answers.{self.f['lot_number']}": {'$in': list_lotes}

            # "answers.644c36f1d20db114694a495a": "auditado",
            # 'answers.679bd3e1e213a8e4c124c05c': 'REC-82',
        }
        print('query=', simplejson.dumps(query, indent=3))
        records = self.cr.find(query,{'folio':1, 'answers':1})#.limit(1000)

        #self.cr.update_many(query, {'$unset': {'connection_record_id': ''}})

        print('pasa recors.....')
        update_ids = []
        for rec in records:
            answers = rec.get('answers',{})
            if not answers:
                continue
            rec_id = rec.get('_id')
            # lot_number = answers.get(self.f['lot_number'])
            # query = {
            # 'form_id':self.FORM_INVENTORY_ID,
            # 'deleted_at': {'$exists': False},
            # '_id': {'$ne':rec_id},
            # f"answers.{self.Product.SKU_OBJ_ID}.{self.Product.f['product_code']}":'1468270',
            # f"answers.{self.f['lot_number']}":lot_number,
            #  }
            # old_rec = self.cr.find(query,{'folio':1})
            # for x in old_rec:
            #     update_ids.append(str(x.get('_id')))
            print('rec', rec_id)
            update_ids.append(str(rec_id))
        print('Size of updated ids:' , len(update_ids))
        if update_ids:
            answer = {self.f['product_grading_pending']:'pendiente'}
            # answer = {'6442e2fbc0dd855fe856fddd': 0} # Le pongo cuarentena en cero nomas para editar
            print('Doing patch_multi_record', update_ids)
            res = self.lkf_api.patch_multi_record(answer, self.FORM_INVENTORY_ID,  record_id=update_ids, threading=True)
            print('\n +++ res =',res)
                

        return True


if __name__ == '__main__':
    stock_obj = Stock(settings, sys_argv=sys.argv, use_api=True)
    stock_obj.console_run()
    stock_obj.update_stock_record()
